<!DOCTYPE html>
<html>
    <head>
        <% include ./meta-resources.ejs %>
        <link rel='stylesheet' href='/stylesheets/pg-movie-list.css' />
    </head>
    <body>
        <% include ./header.ejs %>
        <% var theater = hallBasicInfo.theater%>
        <div class="container mt-4">
            <h2 class="mk-sub-title"><%=theater.theaterName%></h2>
            <p class="mk-sub-title-desc"><%= theater.street + ", " + theater.city + ", " + theater.state + ", " + theater.zipcode%></p>
            <p>
                <span class="mk-span mk-text-mute">Hall Revenue:</span>
                <span class="mk-span"><%= hallBasicInfo.revenue%></span>
                <span class="mk-span mk-text-mute">Tickets Sold:</span>
                <span class="mk-span"><%= hallBasicInfo.tickets%></span>
            </p>
            <p>
                <a href="#" class="btn btn-dark">Edit Hall</a>
            </p>

            <% if(typeof(hallMovies) === "undefined" || !hallMovies.length > 0) {%>
                <h3>NO SCHEDULES FOR NOW : )</h3>
            <% } else { %>
                <div class="mk-hall-list-wrapper">
                    <ul class="mk-hall-movies-list">
                        <% for(let j = 0; j < hallMovies.length; j++) { %>
                            <% var hallMovie = hallMovies[j];%>
                            <li class="row mt-4">
                                <div class="col-auto">
                                    <a href="#">
                                        <img class="mk-movie-thumb-img" src=<%=hallMovie.coverImageUrl%>>
                                    </a>
                                </div>
                                <div class="mk-hall-list-info-wrapper col-3">
                                    <a href="<%=PathDict.GET.MOVIE_DETAILS + "?id=" + hallMovie.movieId%>"><h3><%= hallMovie.movieTitle%></h3></a>
                                    <div>
                                        <p class="mk-movie-review-rating">
                                            <% for(let k = 0; k < 5; k++){ %>
                                                <% if(k <= Math.round(hallMovie.stars)){ %>
                                                    <span class="fa fa-star mk-star-filled"></span>
                                                <% } else{%>
                                                    <span class="fa fa-star"></span>
                                                <% } %>
                                            <% } %>
                                        </p>
                                    </div>
                                    <div>
                                        <% for(let k = 0; k < hallMovie.genres.length; k++) {%>
                                            <span class="mk-movie-genre-tag"><%= (k===0 ? "" : ", ") + hallMovie.genres[k].genreName %></span>
                                        <% } %>
                                    </div>

                                </div>
                                <div class="mk-hall-schedules-wrapper col-6">
                                    <div><span>Select a movie time to buy Standard Showtimes</span></div>
                                    <div class="mk-hall-schedules-list">
                                        <ul>
                                            <% for(let k = 0; k < hallMovie.schedules.length; k++) {%>
                                                <li>
                                                    <span><%= hallMovie.schedules[k].showtime%></span>
                                                </li>
                                            <% }%>
                                        </ul>
                                    </div>
                                </div>
                            </li>
                        <% }%>
                    </ul>
                </div>
            <% } %>
            
        </div>

        <% include ./lib-url.ejs %>
    </body>
</html>
